# apphosting.yaml - The Deployment Blueprint for reactive.rocks
kind: "AppHostingYaml"
schemaVersion: "v1"

# 1. Environment Variables & Secrets
env:
  - variable: GEMINI_API_KEY
    secret: GEMINI_API_KEY
  - variable: NEXT_PUBLIC_GEMINI_API_KEY
    secret: GEMINI_API_KEY # This must match your Secret Manager name
  - variable: NEXT_PUBLIC_REACTIVE_DEBUG
    value: "true"

# 2. Compute Resources (Crucial for TFJS and Next.js 15)
runConfig:
  cpu: 2 # Increased to 2 for smoother hand-tracking processing
  memoryMiB: 2048 # 2GB RAM is the "sweet spot" for MediaPipe + Next.js Server
  concurrency: 50 # Prevents the node from being overwhelmed by simultaneous sessions
  maxInstances: 10 # Scaling limit to manage hackathon costs

# 3. Build Configuration
# This helps the 'Pack' stage ignore non-essential binaries that cause 404s
buildConfig:
  runtime: "nodejs22" # Matches the builder we saw in your failed logs
