# apphosting.yaml - The Deployment Blueprint for reactive.rocks
kind: "AppHostingYaml"
schemaVersion: "v1"

# 1. Environment Variables & Secrets
env:
  - variable: NEXT_PUBLIC_GEMINI_API_KEY
    value: "your_gemini_api_key_here" # TODO: Replace with a secret in production
  - variable: QUINCE_RECURSION_LIMIT
    value: "15" # Limits the depth of the recursive loop to prevent memory leaks

# 2. Compute Resources (Crucial for TFJS and Next.js 15)
runConfig:
  cpu: 2 # Increased to 2 for smoother hand-tracking processing
  memoryMiB: 2048 # 2GB RAM is the "sweet spot" for MediaPipe + Next.js Server
  concurrency: 50 # Prevents the node from being overwhelmed by simultaneous sessions
  maxInstances: 10 # Scaling limit to manage hackathon costs

# 3. Build Configuration
# This helps the 'Pack' stage ignore non-essential binaries that cause 404s
buildConfig:
  runtime: "nodejs22" # Matches the builder we saw in your failed logs
